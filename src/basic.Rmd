---
---

```{r include=FALSE}
library(visreg)
opts_knit$set(aliases=c(h = 'fig.height', w = 'fig.width'))
opts_knit$set(global.par=TRUE)
opts_chunk$set(fig.path='img/basic-')
```
```{r fake, echo=FALSE, results='hide'}
par(mar=c(5,5,0.5,0.5))
plot(1:10)
```

Let's begin with a simple, additive, linear model:

```{r mod}
fit <- lm(Ozone ~ Solar.R + Wind + Temp, data=airquality)
summary(fit)$coef
```

As the summary indicates, wind and temperature have clear effects on ozone, whereas solar radiation has a more subtle effect.  Visual summaries are often more informative and clear than numerical summaries.  Let's see what `visreg` provides:

```{r wind, h=5, w=5, cache=TRUE}
visreg(fit, "Wind")
```

```{r solar, h=5, w=5, cache=TRUE}
visreg(fit, "Solar.R")
```

The visual summaries reinforce the numeric ones: Wind has an undeniable negative association with ozone, whereas the effect of solar radiation is just barely significant: you can try adding `abline(h=44.5, lty=2)` to the above plot to see that the gray band just barely excludes a flat line.

All aspects of the above plot (the line, the partial residuals, the band) depend on the specification of not only `Solar.R` but also of all the other terms in the model.  In other words, the result is fully conditional on all components of the predictor; in `visreg`, this type of plot is called a *conditional* plot, and it is the default type.  By default, the other terms in the model are set to their median if the term is numeric or the most common category if the term is a factor.  Changing these defaults is disucssed in [conditioning](conditioning.html).

In addition to continuous explanatory variables, `visreg` also allows the easy visualization of differences between the levels of categorical variables.  The following block of code creates a factor called `Heat` by discretizing `Temp`, and then visualizes its relationship with `Ozone`:


```{r heat, h=5, w=5, cache=TRUE}
airquality$Heat <- cut(airquality$Temp, 3, labels=c("Cool", "Mild", "Hot"))
fit <- lm(Ozone ~ Solar.R + Wind + Heat, data=airquality)
visreg(fit, "Heat")
```
